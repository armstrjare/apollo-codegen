{"version":3,"sources":["../src/serializeToJSON.js"],"names":["serializeToJSON","serializeAST","context","operations","fragments","typesUsed","map","serializeType","ast","space","key","value","undefined","expandTypes","String","type","serializeEnumType","serializeInputObjectType","name","description","values","getValues","kind","fields","getFields"],"mappings":";;;;;;;;;;;;;;kBAMwBA,e;QAQRC,Y,GAAAA,Y;;AAdhB;;;;AAMe,SAASD,eAAT,CAAyBE,OAAzB,EAAkC;AAC/C,SAAOD,aAAa;AAClBE,gBAAY,sBAAcD,QAAQC,UAAtB,CADM;AAElBC,eAAW,sBAAcF,QAAQE,SAAtB,CAFO;AAGlBC,eAAWH,QAAQG,SAAR,CAAkBC,GAAlB,CAAsBC,aAAtB;AAHO,GAAb,EAIJ,IAJI,CAAP;AAKD;;AAEM,SAASN,YAAT,CAAsBO,GAAtB,EAA2BC,KAA3B,EAAkC;AACvC,SAAO,yBAAeD,GAAf,EAAoB,UAASE,GAAT,EAAcC,KAAd,EAAqB;AAC9C,QAAIA,UAAUC,SAAd,EAAyB;AACvB,aAAO,IAAP;AACD,KAFD,MAEO,IAAI,qBAAOD,KAAP,CAAJ,EAAmB;AACxB,UAAIE,WAAJ,EAAiB;AACf,eAAON,cAAcI,KAAd,CAAP;AACD,OAFD,MAEO;AACL,eAAOG,OAAOH,KAAP,CAAP;AACD;AACF,KANM,MAMA;AACL,aAAOA,KAAP;AACD;AACF,GAZM,EAYJF,KAZI,CAAP;AAaD;;AAED,SAASF,aAAT,CAAuBQ,IAAvB,EAA6B;AAC3B,MAAIA,wCAAJ,EAAqC;AACnC,WAAOC,kBAAkBD,IAAlB,CAAP;AACD,GAFD,MAEO,IAAIA,+CAAJ,EAA4C;AACjD,WAAOE,yBAAyBF,IAAzB,CAAP;AACD;AACF;;AAED,SAASC,iBAAT,CAA2BD,IAA3B,EAAiC;AAAA,MACvBG,IADuB,GACDH,IADC,CACvBG,IADuB;AAAA,MACjBC,WADiB,GACDJ,IADC,CACjBI,WADiB;;AAE/B,MAAMC,SAASL,KAAKM,SAAL,EAAf;;AAEA,SAAO;AACLC,UAAM,UADD;AAELJ,cAFK;AAGLC,4BAHK;AAILC,YAAQA,OAAOd,GAAP,CAAW;AAAA,aACjB,EAAEY,MAAMP,MAAMO,IAAd,EAAoBC,aAAaR,MAAMQ,WAAvC,EADiB;AAAA,KAAX;AAJH,GAAP;AAQD;;AAED,SAASF,wBAAT,CAAkCF,IAAlC,EAAwC;AAAA,MAC9BG,IAD8B,GACRH,IADQ,CAC9BG,IAD8B;AAAA,MACxBC,WADwB,GACRJ,IADQ,CACxBI,WADwB;;AAEtC,MAAMI,SAAS,sBAAcR,KAAKS,SAAL,EAAd,CAAf;;AAEA,SAAO;AACLF,UAAM,iBADD;AAELJ,cAFK;AAGLC,4BAHK;AAILI;AAJK,GAAP;AAMD","file":"serializeToJSON.js","sourcesContent":["import {\n  isType,\n  GraphQLEnumType,\n  GraphQLInputObjectType,\n} from 'graphql';\n\nexport default function serializeToJSON(context) {\n  return serializeAST({\n    operations: Object.values(context.operations),\n    fragments: Object.values(context.fragments),\n    typesUsed: context.typesUsed.map(serializeType),\n  }, '\\t');\n}\n\nexport function serializeAST(ast, space) {\n  return JSON.stringify(ast, function(key, value) {\n    if (value === undefined) {\n      return null;\n    } else if (isType(value)) {\n      if (expandTypes) {\n        return serializeType(value);\n      } else {\n        return String(value);\n      }\n    } else {\n      return value;\n    }\n  }, space);\n}\n\nfunction serializeType(type) {\n  if (type instanceof GraphQLEnumType) {\n    return serializeEnumType(type);\n  } else if (type instanceof GraphQLInputObjectType) {\n    return serializeInputObjectType(type);\n  }\n}\n\nfunction serializeEnumType(type) {\n  const { name, description } = type;\n  const values = type.getValues();\n\n  return {\n    kind: \"EnumType\",\n    name,\n    description,\n    values: values.map(value => (\n      { name: value.name, description: value.description }\n    ))\n  }\n}\n\nfunction serializeInputObjectType(type) {\n  const { name, description } = type;\n  const fields = Object.values(type.getFields());\n\n  return {\n    kind: \"InputObjectType\",\n    name,\n    description,\n    fields\n  }\n}\n"]}